# Troubleshooting Authentication Issues

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "Failed to authenticate. Please try again.", –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

## üîç –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend

–í –ª–æ–≥–∞—Ö Railway –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- `Token payload (unverified): {...}` - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–æ–∫–µ–Ω–∞
- `Expected audience: ...` - –æ–∂–∏–¥–∞–µ–º—ã–π –¥–æ–º–µ–Ω
- `Token audience: ...` - –¥–æ–º–µ–Ω –≤ —Ç–æ–∫–µ–Ω–µ

**–ï—Å–ª–∏ –¥–æ–º–µ–Ω—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç** - —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏!

## üîß –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è APP_DOMAIN

–í Railway —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```
APP_DOMAIN=semantle.vercel.app
```

**–í–∞–∂–Ω–æ:**
- –ë–µ–∑ `https://`
- –ë–µ–∑ —Å–ª–µ—à–∞ –≤ –∫–æ–Ω—Ü–µ
- –î–æ–ª–∂–µ–Ω —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –¥–æ–º–µ–Ω–æ–º –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ (`homeUrl` –≤ `farcaster.json`)

## üîß –®–∞–≥ 3: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É audience (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –¥–æ–±–∞–≤—å—Ç–µ –≤ Railway:

```
VERIFY_AUDIENCE=false
```

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! –í production –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `true`.

## üîç –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console –∏ –Ω–∞–π–¥–∏—Ç–µ:
- –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –°—Ç–∞—Ç—É—Å –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ (400, 401, 500)
- –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ –æ—Ç backend

## üìã –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### "Invalid audience"
**–ü—Ä–∏—á–∏–Ω–∞:** –î–æ–º–µ–Ω –≤ —Ç–æ–∫–µ–Ω–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `APP_DOMAIN`
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `APP_DOMAIN` —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –¥–æ–º–µ–Ω–æ–º –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ

### "JWT verification service unavailable"
**–ü—Ä–∏—á–∏–Ω–∞:** JWKS –∫–ª–∏–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ `https://auth.farcaster.xyz/.well-known/jwks.json`

### "Token expired"
**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫ (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 1 —á–∞—Å)
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ - –±—É–¥–µ—Ç –≤—ã–¥–∞–Ω –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω

### "Invalid token"
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–ø–∏—Å—å—é –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–æ–º —Ç–æ–∫–µ–Ω–∞
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ï—Å–ª–∏ –≤—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ staging:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ Railway:
   ```
   APP_DOMAIN=localhost:3000
   VERIFY_AUDIENCE=false
   ```

2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–Ω—ã–π –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ deployment

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏–∑ Railway (–æ—Å–æ–±–µ–Ω–Ω–æ —Å—Ç—Ä–æ–∫–∏ —Å "Token payload" –∏ "Expected audience")
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `https://your-domain.com/.well-known/farcaster.json`
